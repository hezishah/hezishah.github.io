<html>
<header>
    <script src="jquery-3.7.1.min.js"></script>
    <style>
        h1 {text-align: center;}
        p {text-align: center;}
        div {text-align: center;}
        br {text-align: center;}
        table, tr, td {
            border: 1px solid black;
        }
    </style>
    <script>
        var known = []
        if ( localStorage.getItem("knownWords") != null)
        {
            known = JSON.parse(localStorage.getItem("knownWords"));
        }
        function nextWord()
        {
            $.getJSON("words_v5.json", function(words) {
                /*alert(known);*/
                let l = words.length;
                var rndInt = randomIntFromInterval(0, l);
                //var str = $( "p" ).first().text();
                var word = ""
                var level = 0
                while(true)
                {
                    word = words[rndInt]["מילה באנגלית"]
                    level = words[rndInt]["רמה"]
                    if( known.indexOf(word+":"+level) < 0 )
                    {
                        //break;
                        if( (level === $('#cc').prop('selectedIndex')) || ($('#cc').prop('selectedIndex') === 0) )
                            break;
                    }
                    rndInt += 1;
                    rndInt %= l;
                }
                let trans = words[rndInt]["תרגום יבש"]
                $( "p" ).first().html( word + ":" + level.toString() );
                $( "p" ).last().html( trans ).hide();
                var thtml = "";
                for (word in known)
                {
                    thtml += "<tr>\r\n<td>"+known[word]+"</td>\r\n</tr>\r\n"
                } 
                $( "tbody" ).first().html( thtml )
            }); 
        }
        function knownWord()
        {
            const w = $( "p" ).first().html().valueOf();
            if(known.indexOf(w) < 0)
            {
                known.push(w);
                localStorage.setItem("knownWords", JSON.stringify(known));
            }
            nextWord();
        }
        function knownClear()
        {
            known = []
            localStorage.setItem("knownWords", JSON.stringify(known));
            nextWord();
        }
    </script>
</header>
<body>
    <h1>:מילה באנגלית</h1>
    <div>
        Level:
        <select id='cc' name='cc'>
            <option value=0>All</option>
            <option value=1>1</option>
            <option value=2>2</option>
            <option value=3>3</option>
        </select>
        <button onclick="nextWord()">Next</button>
    </div>
    <p >Hello</p>
    <br>
    <h1>:פירוש </h1>
    <br>
    <div>
        <input type="text" id="lname" name="lname">
    </div>
    <p >Hello</p>
    <div>
        <button onclick="$('p').last().show()">Show</button>
    </div>
    <br/>
    <br/>
    <div>
        <button onclick="knownWord()">I know this word</button>
    </div>
    <table class="table table-dark table-striped" id="myTable">
        <thead>
        <tr>
            <th scope="col">Knwon Word</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <div>
        <button onclick="knownClear()">Clear known words</button>
    </div>
    <script>
        $('#cc').index(0)
        function randomIntFromInterval(min, max) { // min and max included 
            return Math.floor(Math.random() * (max - min + 1) + min);
        }

        nextWord()
    </script>
</body>
</html>
