<html>
<header>
    <script src="jquery-3.7.1.min.js"></script>
    <style>
        h1 {text-align: center;}
        p {text-align: center;}
        div {text-align: center;}
        br {text-align: center;}
    </style>
    <script>
        var known = []
        if ( localStorage.getItem("knownWords") != null)
        {
            known = localStorage.getItem("knownWords");
        }
        function nextWord()
        {
            $.getJSON("words_v3.json", function(words) {
                /*alert(known);*/
                let l = words.length;
                var rndInt = randomIntFromInterval(0, l);
                //var str = $( "p" ).first().text();
                var word = ""
                var level = 0
                while(true)
                {
                    word = words[rndInt]["מילה באנגלית"]
                    level = words[rndInt]["רמה"]
                    if( known.indexOf(word) < 0 )
                    {
                        //break;
                        if( (level === $('#cc').prop('selectedIndex')) || ($('#cc').prop('selectedIndex') === 0) )
                            break;
                    }
                    rndInt += 1;
                    rndInt %= l;
                }
                let trans = words[rndInt]["תרגום יבש"]
                $( "p" ).first().html( word + ":" + level.toString() );
                $( "p" ).last().html( trans ).hide();
            }); 
        }
        function knownWord()
        {
            known.push($( "p" ).first().html().valueOf())
            localStorage.setItem("knownWords", known) 
        }
    </script>
</header>
<body>
    <h1>:מילה באנגלית</h1>
    <div>
        Level:
        <select id='cc' name='cc'>
            <option value=0>All</option>
            <option value=1>1</option>
            <option value=2>2</option>
            <option value=3>3</option>
        </select>
        <button onclick="nextWord()">Next</button>
    </div>
    <p >Hello</p>
    <br>
    <h1>:פירוש </h1>
    <br>
    <div>
        <input type="text" id="lname" name="lname">
    </div>
    <p >Hello</p>
    <div>
        <button onclick="$('p').last().show()">Show</button>
    </div>
    <br/>
    <br/>
    <div>
        <button onclick="knownWord()">I know this word</button>
    </div>
    <script>
        $('#cc').index(0)
        function randomIntFromInterval(min, max) { // min and max included 
            return Math.floor(Math.random() * (max - min + 1) + min);
        }

        nextWord()
    </script>
</body>
</html>
